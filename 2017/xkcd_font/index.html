<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="generator" content="HTML Tidy for HTML5 for Linux version 4.9.30">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Philip Elson">
    <link rel="icon" href="https://pelson.github.io/theme/images/favicon.ico">
    <title>
      Playing with Randall Munroe's XKCD handwriting by Phil Elson - Software | Science | Python
    </title><!-- Bootstrap core CSS -->
    <link href="https://pelson.github.io/theme/bootstrap/css/bootstrap.min.css" rel="stylesheet"><!-- Custom styles for this template -->
    <link href="https://pelson.github.io/theme/css/style.css" rel="stylesheet">
    <link href="https://pelson.github.io/" type="application/atom+xml" rel="alternate" title="Phil Elson - Software | Science | Python ATOM Feed">
    <link rel="stylesheet" href="https://pelson.github.io/theme/font-awesome/css/font-awesome.min.css">
    <link href="//fonts.googleapis.com/css?family=Pacifico" rel="stylesheet" type="text/css">
  </head><!-- NAVBAR ================================================== -->
  <body>
    <div class="container-fullwidth">
      <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="row">
          <div id="banner" class="col-md-3 shrinker">
            <div>
              <p class="by-phil">
                <a href="https://pelson.github.io">Phil Elson</a>
              </p>
            </div>
          </div>
          <div class="col-md-6 text-center">
            <div class="brand-icons">
              <div id="nav-sci" class="col-xs-4">
                <a href="https://pelson.github.io"><i class="fa fa-icon fa-fw fa-flask"></i>
                <h2>
                  Science
                </h2></a>
              </div>
              <div id="nav-software" class="col-xs-4">
                <a href="https://pelson.github.io"><i class="nav-icon fa fa-code"></i>
                <h2>
                  Software
                </h2></a>
              </div>
              <div id="nav-oss" class="col-xs-4">
                <a href="https://pelson.github.io"><img src="https://pelson.github.io/theme/images/osi_white.png" alt="Open Source">
                <h2>
                  Open source
                </h2></a>
              </div>
            </div>
          </div>
          <div class="col-md-3 nav-toggle">
            <i class="fa fa-bars"></i>
          </div>
        </div>
        <script>
        var navbar_toggled = false;
        </script>
        <div class="actual-navbar shrink">
          <ul class="nav navbar-nav nav-pills">
            <li class="hidden-xs clearfix">
              <a href="https://pelson.github.io"><i class="fa fa-fw fa-home"></i>Home</a>
            </li>
            <li class=" clearfix">
              <a href="https://pelson.github.io/articles/"><i class="fa fa-fw fa-file-o"></i>Articles</a>
            </li>
            <li class=" clearfix">
              <a href="https://pelson.github.io/announce/"><i class="fa fa-fw fa-bullhorn"></i>Announcements</a>
            </li>
            <li class=" clearfix">
              <a href="https://pelson.github.io/field-notes/"><i class="fa fa-fw fa-map-o"></i>&nbsp;Field notes</a>
            </li>
            <li class=" clearfix">
              <a href="https://pelson.github.io/hints-n-tips/"><i class="fa fa-fw fa-list-ul"></i>Hints &amp; Tips</a>
            </li>
            <li class="hidden-xs dropdown clearfix">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-fw fa-clock-o"></i>Recent <span class="caret"></span></a>
              <ul class="dropdown-menu dropdown-menu-right">
                <li>
                  <a href="https://pelson.github.io/2017/xkcd_font/">Playing with Randall Munroe's XKCD handwriting</a>
                </li>
                <li>
                  <a href="https://pelson.github.io/2017/heroku_fuse_mount/">Mounting a FUSE filesystem in Heroku</a>
                </li>
                <li>
                  <a href="https://pelson.github.io/2015/conda_build_all/">Building a matrix of conda distributions with conda-build-all</a>
                </li>
                <li>
                  <a href="https://pelson.github.io/2015/hints/vim_search_replace/">Vim search and replace across many files</a>
                </li>
                <li>
                  <a href="https://pelson.github.io/2015/conda_execute/">Running scripts in temporary conda environments with conda execute</a>
                </li>
                <li class="nav-divider"></li>
                <li>
                  <a href="https://pelson.github.io/archives.html">See full archive (9)</a>
                </li>
              </ul>
            </li>
            <li class="hidden-xs dropdown clearfix">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-fw fa-tags"></i>Tags <span class="caret"></span></a>
              <ul class="dropdown-menu dropdown-menu-right">
                <li>
                  <a href="https://pelson.github.io/tag/biggus/">biggus (1)</a>
                </li>
                <li>
                  <a href="https://pelson.github.io/tag/conda/">conda (2)</a>
                </li>
                <li>
                  <a href="https://pelson.github.io/tag/docker/">docker (1)</a>
                </li>
                <li class="active">
                  <a href="https://pelson.github.io/tag/fonts/">fonts (1)</a>
                </li>
                <li>
                  <a href="https://pelson.github.io/tag/fuse/">FUSE (1)</a>
                </li>
                <li>
                  <a href="https://pelson.github.io/tag/heroku/">Heroku (1)</a>
                </li>
                <li>
                  <a href="https://pelson.github.io/tag/matplotlib/">matplotlib (4)</a>
                </li>
                <li class="active">
                  <a href="https://pelson.github.io/tag/python/">Python (7)</a>
                </li>
                <li>
                  <a href="https://pelson.github.io/tag/voluminous-data/">voluminous data (1)</a>
                </li>
                <li class="active">
                  <a href="https://pelson.github.io/tag/xkcd/">XKCD (1)</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
      <div class="navbar-spacer"></div>
    </div>
    <div class="container">
      <h2 id="single">
        Playing with Randall Munroe's XKCD handwriting
      </h2>
      <div class="date entry-info">
        <div style="float: left; padding: 0.5em 1em 0.5em 0em;">
          <time datetime="2017-03-16T00:00:00+00:00" class="icon"></time>
          <div class="time-icon">
            <p class="year">
              2017
            </p>
            <p class="month">
              March
            </p><span class="day">16</span>
          </div>
        </div>
        <p>
          Tags: <a href="https://pelson.github.io/tag/fonts/">fonts (1)</a>, <a href="https://pelson.github.io/tag/python/">Python (7)</a>, <a href="https://pelson.github.io/tag/xkcd/">XKCD (1)</a>
        </p>
      </div>
      <div class="entry">
        <p>
          The XKCD font (as used by matplotlib et al.) recently <a href="https://github.com/ipython/xkcd-font/pull/13">got an update</a> to include lower-case characters. For some time now I have been aware of a handwriting sample produced by Randall Munroe (XKCD's creator) that I was interested in exploring. The ultimate aim is to automatically produce a font-file using open source tools, and to learn a few things along the way.
        </p><!-- PELICAN_END_SUMMARY -->
        <p>
          The thing about fonts is that there is actually a lot going on:
        </p>
        <ul>
          <li>
            <strong>spacing</strong> - the whitespace around a character
          </li>
          <li>
            <strong>kering</strong> - special case whitespace adjustments (e.g. notice the space between "Aw" is much closer than between "As")
          </li>
          <li>
            <strong>hinting</strong> - techniques for improved rasterization at low resolution
          </li>
          <li>
            <strong>liatures</strong> - special pairs/groups of characters. The traditional example is ffi, but for hand-writing, any character combination is plausible.
          </li>
        </ul>
        <p>
          The raw material I'm going to use is a scan produced by XKCD author Randall Munroe containing many charaters, as well as some spacing and ligature information. Importantly, all of the glyphs have been written at the same scale and using the same pen. These two details are important, as they will allow us to derive appropriate spacing and kerning information, and should result in a font that is well balanced.
        </p>
        <p>
          <img alt="Alt text" src="./../../images/xkcd-font/full-small.png">
        </p>
        <p>
          (full image available on GitHub at https://github.com/ipython/xkcd-font/issues/9#issuecomment-127412261)
        </p>
        <p>
          Notice some interesting features of this sample, including ligatures (notice that "LB" is a single mark) and kerning (see the spacing of "VA"):
        </p>
        <p>
          <img alt="Alt text" src="./../../images/xkcd-font/small-detail.png">
        </p>
        <p>
          There are a few useful articles already out there on this topic, particularly one from 2010 regarding the creation of fonts from a <a href="http://scruss.com/blog/2010/05/09/creating-a-truetype-font-from-your-handwriting-with-your-scanner-your-printer-and-fontforge/">hand-written sample</a>. Notably though, there isn't much that is automated - this is a rub for me, as without automation it is challenging for others to contribute to the font in an open and diffable way.
        </p>
        <p>
          Let's get stuck in by separating each of the glyphs from the image into their own image.
        </p>
        <p>
          {% notebook ../field_notes/xkcd/part1.ipynb %}
        </p>
        <h2>
          Conclusion
        </h2>
        <p>
          In this initial phase, we haven't done anything particularly clever - we've simply loaded in the image, taken a subset, and used scipy's image labelling capabilities to understand what the labelling process looks like. Originally I had planned to try to separate some of the glyphs that were obviously fused together - I'd even gone as far as protyping using a filter to disolve the outline (so that I could separate the labels) and then subsequently growing the labels again back to their original form (but keeping the separate labels). This technique worked, but it produced shapes that weren't perfect, and the complexities (e.g. handling of bits that dissapeared, such as dots on the letter "i") weren't worth it.
        </p>
        <p>
          In the next phase, we will use the techinque shown here to generate individual image files. In addition, we will apply some heuristics merge back together glyphs such as the dot and comma of a semi-colon.
        </p>
        <p>
          <em>The next article in this series is entitled</em>: <strong><a href="./xkcd_font_pt2.md">Merging together labels, and generating label images</a></strong>.
        </p>
        <p>
          Follow up items (some not yet written):
        </p>
        <ul>
          <li>Blending together obvious glyphs
          </li>
          <li>Converting to vector
          </li>
          <li>Generating the font with font-forge
          </li>
        </ul>
      </div>
      <hr>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
      var disqus_shortname = "pelson";
      var disqus_identifier = "xkcd_font";

      (function() {
      var dsq = document.createElement("script");
      dsq.type = "text/javascript";
      dsq.async = true;
      dsq.src = "//" + disqus_shortname + ".disqus.com/embed.js";
      (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
      })();
      </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- /END THE FEATURETTES -->
      <div class="clearfix"></div>
      <hr class="featurette-divider">
      <!-- FOOTER -->
      <footer>
        <p class="pull-right">
          <a href="#">Back to top</a>
        </p>
        <p>
          © 2017 Phil Elson · <a href="https://pelson.github.io#">About</a> · <a href="https://pelson.github.io#contact">Contact</a> · <a href="https://pelson.github.io/feeds/atom.xml"><i class="fa fa-fw fa-rss-square"></i>RSS</a>
        </p>
      </footer>
    </div><!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://pelson.github.io/theme/jquery.min.js">
    </script> 
    <script src="https://pelson.github.io/theme/bootstrap.min.js">
    </script> 
    <script src="https://pelson.github.io/theme/js/scroll.js">
    </script> 
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-29774503-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </body>
</html>
